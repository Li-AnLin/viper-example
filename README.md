# Viper Example

採用 [viper](https://github.com/spf13/viper) 嘗試更方便的服務配置

## 起源

之前在開發階段，只使用 env 很容易與其他專案搞混一起。所以有採用讀取特地檔案 `.env` 來協助處理。當初使用 [godotenv](https://github.com/joho/godotenv) 會自動讀取本地的 `.env` 檔。

後來漸漸發現有時要測試別的環境的設定時，需要抓取目標環境的 `.env`，但又不是每個環境變數都需要使用，又需要配合去更改......非常的不方便，有時還會遺漏。

此外，為了標示其環境變數的意義時，會在 `.env` 中後面直接打註解。我本身測試沒問題，以為其他人也不會有問題，但有些小夥伴們的開發環境會因為我在後面打的註解而導致讀取 `.env` 部分變數失敗。

為了改善服務配置的便利性及易讀性 (至少讓我可以在後面打註解啊!!!)，跳槽使用 `viper` 套件統一管理。最後 prod 環境中是採用 container，所以還是不捨棄環境變數，環境變數在這裡還是很方便的 wwwww

根據 Viper 設定的優先度高至低為 
1. flag
2. env
3. config file
4. default